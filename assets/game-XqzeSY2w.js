(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(a){if(a.ep)return;a.ep=!0;const c=o(a);fetch(a.href,c)}})();function w(t){const r=[...t];for(let o=r.length-1;o>0;o--){const n=Math.floor(Math.random()*(o+1));[r[o],r[n]]=[r[n],r[o]]}return r}function x(t){return t?t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>"):""}function g(t,r){t.opcoes.filter(n=>n.correta).length>=1&&r.push(t)}function h(t){const r=t.replace(/\r\n/g,`
`).split(`
`);let o={titulo:"",descricao:"",perguntas:[]},n="",a=!1,c="Geral",s=null,u=null;return r.forEach(d=>{const e=d.trim();if(e.startsWith("```md")){a=!0;return}if(e.startsWith("```")&&a){a=!1;return}if(a){n+=d+`
`;return}if(!e)return;if(e.startsWith("# ")){o.titulo=e.replace("# ","").trim();return}if(e.startsWith("## "))return;const l=e.match(/^__(.*?)__$/);if(l&&l[1]!==void 0){c=l[1].trim();return}if(e.startsWith("id:")){s&&g(s,o.perguntas),s={id:e.replace("id:","").trim(),categoria:c,enunciado:"",opcoes:[],dica:null};return}if(e.startsWith("### ")){s&&(s.enunciado=e.replace("### ","").trim());return}if(e.startsWith("[ ]")||e.startsWith("[x]")){if(s){const f=e.startsWith("[x]");u={texto:e.replace(/\[(x| )\]/,"").trim(),correta:f,explicacao:null},s.opcoes.push(u)}return}if((e.startsWith("-!")||e.startsWith("-["))&&u){u.explicacao=e.replace(/^(-!|-\[|\])/g,"").trim();return}if(e.startsWith("-#")&&s){s.dica=e.replace("-#","").trim();return}}),s&&g(s,o.perguntas),o.descricao=x(n),o}function E(t,r){return h(t).perguntas.map(n=>({...n,id:`${r.replace(".md","")}-${n.id}`}))}const y="quizSRSData";function v(){const t=localStorage.getItem(y);return t?JSON.parse(t):{}}function z(){confirm("Tem certeza? Isso apagarÃ¡ todo o histÃ³rico de aprendizado do Modo Treino.")&&(localStorage.removeItem(y),alert("MemÃ³ria limpa! O algoritmo recomeÃ§arÃ¡ do zero."),location.reload())}const m=t=>`/quiz-biblico//${t}`.replace(/\/+/g,"/"),i={lista:document.getElementById("lista-quizes"),stage:document.getElementById("quiz-stage"),progresso:document.getElementById("barra-progresso-container"),titulo:document.getElementById("titulo-quiz"),descricao:document.getElementById("descricao-quiz"),tempo:document.getElementById("display-tempo"),contador:document.getElementById("contador-perguntas"),selecao:document.getElementById("tela-selecao"),confete:document.getElementById("canvas-confete")},p={perguntas:[],indiceAtual:0,acertos:0,pontuacaoTotal:0,modoJogo:null,respondido:!1,dicasRestantes:2,tempoTotal:30,tempoRestante:30,timerInterval:null,srsStartTime:0};function T(){M(),I()}function M(){i.lista&&fetch(m("quizes/index.json")).then(t=>t.json()).then(t=>{i.lista.innerHTML=t.map(r=>`<li><a href="quiz.html?id=${r.arquivo}">${r.titulo}</a></li>`).join("")}).catch(()=>{i.lista.innerHTML='<p style="text-align:center;">Erro ao carregar lista.</p>'})}function I(){if(!i.stage)return;const r=new URLSearchParams(window.location.search).get("id");r&&fetch(m(`quizes/${r}.md`)).then(o=>{if(!o.ok)throw new Error("Arquivo nÃ£o encontrado");return o.text()}).then(o=>{const n=h(o);i.titulo&&(i.titulo.innerText=n.titulo||"Quiz"),i.descricao&&n.descricao&&(i.descricao.innerHTML=n.descricao,i.descricao.style.display="block"),p.perguntas=n.perguntas,i.selecao.style.display="flex",i.stage.style.display="none"}).catch(o=>{console.error(o),i.titulo&&(i.titulo.innerText="Erro ao carregar"),i.stage.innerHTML='<p style="text-align:center">NÃ£o foi possÃ­vel carregar os dados.</p>',i.stage.style.display="block"})}async function S(){i.titulo&&(i.titulo.innerText="Carregando MemÃ³ria..."),i.lista&&(i.lista.style.display="none"),i.selecao&&(i.selecao.style.display="none");try{const r=await(await fetch(m("quizes/index.json"))).json();let o=[];const n=r.map(async e=>{const f=await(await fetch(m(`quizes/${e.arquivo}.md?t=${Date.now()}`))).text();return E(f,e.arquivo)});(await Promise.all(n)).forEach(e=>o.push(...e));const c=v(),s=Date.now(),u=864e5,d=o.filter(e=>{const l=c[e.id];if(!l)return!0;const f=l.lastReviewed+l.interval*u;return s>=f});if(d.length===0){alert("ðŸŽ‰ Tudo em dia! VocÃª revisou todo o conteÃºdo pendente. Volte amanhÃ£."),location.reload();return}p.perguntas=w(d).slice(0,50),i.titulo&&(i.titulo.innerText=`ðŸ§  Treino do Dia (${p.perguntas.length})`),iniciarJogo("treino")}catch(t){console.error("ERRO TREINO:",t),alert("Erro ao iniciar treino."),location.reload()}}window.iniciarJogo=iniciarJogo;window.iniciarModoTreino=S;window.verificarResposta=verificarResposta;window.mostrarDica=mostrarDica;window.transicaoProximaPergunta=transicaoProximaPergunta;window.resetarMemoriaSRS=z;T();
